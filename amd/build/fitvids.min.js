define(["jquery"],function(t){var e={};return e.fitVids=function(){t.fn.fitVids=function(e){var i={customSelector:null,ignore:null,maxWidth:!0,maxWidthDefault:854,fixedAspectRatio:!0};if(!document.getElementById("fit-vids-style")){var a=document.head||document.getElementsByTagName("head")[0],r=".fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;} .max-width-video-wrapper{margin: 0 auto}",d=document.createElement("div");d.innerHTML='<p>x</p><style id="fit-vids-style">'+r+"</style>",a.appendChild(d.childNodes[1])}return e&&t.extend(i,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]','iframe[src*="hapyak.com"]','iframe[src*="interlude.fm"]','iframe[src*="helloeko.com"]',"object","embed"];i.customSelector&&e.push(i.customSelector);var a=".fitvidsignore";i.ignore&&(a=a+", "+i.ignore);var r=t(this).find(e.join(","));r=r.not("object object"),r=r.not(a),r.each(function(){var e=t(this);if(!(e.parents(a).length>0||"embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){i.fixedAspectRatio?(e.attr("height",480),e.attr("width",854)):e.css("height")||e.css("width")||!isNaN(e.attr("height"))&&!isNaN(e.attr("width"))||(e.attr("height",9),e.attr("width",16));var r="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),d=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),o=r/d;if(!e.attr("name")){var n="fitvid"+t.fn.fitVids._count;e.attr("name",n),t.fn.fitVids._count++}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),i.maxWidth&&(d||i.maxWidthDefault)&&e.parent(".fluid-width-video-wrapper").wrap('<div class="max-width-video-wrapper"></div>').parent(".max-width-video-wrapper").css("max-width",d?d+"px":i.maxWidthDefault+"px"),e.removeAttr("height").removeAttr("width")}})})},t.fn.fitVids._count=0,t("#region-main").fitVids(),t(document).ajaxComplete(function(){t("#region-main").fitVids()})},e});